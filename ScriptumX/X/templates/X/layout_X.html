{% load staticfiles %}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>ScriptumX | {{ title }}</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="{% static 'X/content/bootstrap.min.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'X/content/site.css' %}" />
    <link rel="shortcut icon" href="{%  static 'favicon.ico' %}">
    <link rel="stylesheet" href="{% static 'chosen/chosen.css' %}">
    <link rel="stylesheet" href="{% static 'chosen/bootstrap-chosen.css' %}">
    <script src="{% static 'X/scripts/modernizr-2.6.2.js' %}"></script>
    <script src="{% static 'X/scripts/jquery-1.10.2.js' %}"></script>


    {% block head %}{% endblock %}

    <script type="text/javascript" >
        $(document).ready(function () {
            $(window).on('resize', do_resize );

            function do_resize () {
                var $window = $(this), //this = window
                    height = Math.ceil($window.height()),
                    width = Math.ceil($window.width()),
                    previousHeight = $window.data('previousHeight'),
                    previousWidth = $window.data('previousWidth');

                //if (height !== previousHeight || width !== previousWidth) {
                    var header = Math.ceil($("#main-header").height()),
                    footer = Math.ceil($("#main-footer").height());
                    if (width < 768)
                        $("#app_container").css('height', 'auto');
                    else
                        $("#app_container").css('height', height - header - footer);
                    $("#app_container").css('top', header);
                    $("body").css('padding-top', header);
                    $window.data('previousHeight', height);
                    $window.data('previousWidth', width);
                //}
            };

            do_resize();
            document.getElementById("selected_scope").scrollIntoView();
        });
    </script>
 <!--
    <style>
        .navbar .nav li {
            white-space: nowrap; 
        }
        .navbar-header {
        float: none;
    }
    .navbar-toggle {
        display: block;
    }
    .navbar-collapse {
        border-top: 1px solid transparent;
        box-shadow: inset 0 1px 0 rgba(255,255,255,0.1);
    }
    .navbar-collapse.collapse {
        display: none!important;
    }
    .navbar-nav {
        float: none!important;
        margin: 7.5px -15px;
    }
    .navbar-nav>li {
        float: none;
    }
    .navbar-nav>li>a {
        padding-top: 10px;
        padding-bottom: 10px;
    }
    </style>-->
</head>
     

<body style="overflow:auto; padding-top:118px">

{#--NAVBAR--#}

    <div id="main-header" class="navbar navbar-default navbar-fixed-top" style="margin:0; padding:0; min-height: 24px;">

        <div style="padding:0; margin:0; background-color:#232628;" class="container-fixed-top">
            <div class="navbar-header" style="">
                
                <button style="margin:0; padding:4px 8px 4px 8px;" type="button" class="navbar-toggle btn-primary" data-toggle="collapse" data-target=".navbar-collapse">
                    <i class="fa fa-bars" aria-hidden="true"></i>
                </button>
              
                <a style="padding:8px;  margin:0px" class="navbar-text" href="/"><img height="24" width="24" src="{% static 'img/ScriptumX48.png' %}" /></a>
                                
                <div class="visible-xs-inline">
                    {% block mobile-toolbar %}{% endblock %}
                </div>

            </div>

            <div style="padding:0px; " class="navbar-collapse collapse">
                
                <ul class="nav nav-tabs" role="tablist" style="padding-bottom:0; margin:0; ">

                    {% for tab in tab_list %}
                    {%if tab.id == tab_active_id %} 
                            <li class="active">
                            <a class="{{tab.class}}" href="{{tab.href}}"><img style="margin-left:-8px;" src="{% static tab.img %}"> {{tab.name}}</a>
                            </li>
                        {% else %}
                            <li> <!--class="visible-md-block visible-lg-block"-->
                            <a href="{{tab.href}}"><img style="margin-left:-8px;" src="{% static tab.img %}"> <div class="visible-lg-inline">{{tab.name}}</div><small class="visible-md-inline">{{tab.name}}</small></a>
                            </li>
                        {% endif %}
                    {% endfor %}

                </ul>

            </div><!-- /.nav-collapse -->

        </div><!-- /.container -->

        {% block toolbar %}{% endblock %}

    </div>

{#--CONTENT--#}

    <div id="app_container" style="margin:0; padding:0; width:100%; top:118px" class="container-fluid body-content">

        {% if error_message %}
            <p class="text-danger">aaa{{error_message}}</p>
        {% endif %}

        {% block content %}{% endblock %}

    </div>

{#--FOOTER--#}

    <div id="main-footer" class="navbar-fixed-bottom hidden-xs" style="margin:0; padding:0; background-color:#232628">
        <div class="pull-right hidden-xs" style="min-height:20px; margin:2px; padding:0;">
            <small>&copy; ScriptumX &emsp; <i class="fa fa-user"></i> {{env.user}} &emsp; <i class="fa fa-film"></i> {{env.project}} &emsp; <i class="fa fa-book"></i> {{env.script}} &emsp; <i class="fa fa-calendar-o"></i> {% now "Y-m-d" %} &ensp; <i class="fa fa-clock-o"></i> {% now "H:i" %}</small>
        </div>
    </div>

{#--SCRIPTS--#}

    <script src="{% static 'X/scripts/bootstrap.js' %}"></script>
    <script src="{% static 'X/scripts/respond.js' %}"></script>
    <script src="{% static 'chosen/chosen.jquery.js' %}" type="text/javascript"></script>

    <script type="text/javascript">
        var config = {
            '.chosen-select'            : {},
            '.chosen-select-deselect'   : {allow_single_deselect:true},
            '.chosen-select-no-single'  : {disable_search_threshold:10},
            '.chosen-select-no-results' : {no_results_text:'Oops, nothing found!'},
            '.chosen-select-width'      : {width:"100%"},
            '.chosen-select-box'        : { allow_single_deselect: true, disable_search_threshold: 10, no_results_text: '[EMPTY]' },
            '.chosen-select-single'     : { allow_single_deselect: true, disable_search_threshold: 10, no_results_text: '[EMPTY]' },
            '.chosen-select-multi'      : { no_results_text: '[EMPTY]', width: "100%"},
            }
        for (var selector in config) {
            $(selector).chosen(config[selector]);
        }
    </script>

{% block scripts %}{% endblock %}

</body>
</html>
